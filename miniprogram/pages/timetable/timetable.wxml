<!--miniprogram/pages/timetable/timetable.wxml-->
<view class="allWeeks" >
  <view class="weekall selectWeek{{selectWeek==0?'':'none'}}"  data-week="0" bindtap="changeAllWeek">
    <text decode="true">All&nbsp;Week</text>
  </view>
  <view class="week selectWeek{{selectWeek==31?'':'none'}}"  data-week="1" bindtap="change_week">
    <text decode="true">Week1</text>
  </view>
  <view class="week selectWeek{{selectWeek==32?'':'none'}}" data-week="2" bindtap="change_week" >
    <text decode="true">Week2</text>
  </view>
  <view class="week selectWeek{{selectWeek==33?'':'none'}}" data-week="3" bindtap="change_week" >
    <text decode="true">Week3</text>
  </view>
  <view class="week selectWeek{{selectWeek==34?'':'none'}}" data-week="4" bindtap="change_week">
    <text>Week4</text>
  </view>
  <view class="week selectWeek{{selectWeek==35?'':'none'}}" data-week="5" bindtap="change_week" >
    <text>Week5</text>
  </view>
  <view class="week selectWeek{{selectWeek==36?'':'none'}}" data-week="6" bindtap="change_week" >
    <text>Week6</text>
  </view>
  <view class="week selectWeek{{selectWeek==37?'':'none'}}" data-week="7" bindtap="change_week" >
    <text>Week7</text>
  </view>
  <view class="week selectWeek{{selectWeek==38?'':'none'}}" data-week="8" bindtap="change_week" >
    <text>Week8</text> 
  </view>
  <view class="week selectWeek{{selectWeek==39?'':'none'}}" data-week="9" bindtap="change_week" >
    <text>Week9</text>
  </view>
  <view class="week selectWeek{{selectWeek==41?'':'none'}}" data-week="10" bindtap="change_week" >
    <text>Week10</text>
  </view>
  <view class="week selectWeek{{selectWeek==42?'':'none'}}" data-week="11" bindtap="change_week" >
    <text>Week11</text>
  </view>
  <view class="week selectWeek{{selectWeek==43?'':'none'}}" data-week="12" bindtap="change_week" >
    <text>Week12</text>
  </view>
  <view class="week selectWeek{{selectWeek==44?'':'none'}}" data-week="13" bindtap="change_week" >
    <text>Week13</text>
  </view>
</view>

<view class="timeTable">
  <view class="time">
    <view class="month">
      <text>{{currentMonth}}月</text>
    </view>
    <view class="timePoint">
      <text>8</text>
    </view>
    <view class="timePoint">
      <text>9</text>
    </view>
    <view class="timePoint">
      <text>10</text>
    </view>
    <view class="timePoint">
      <text>11</text>
    </view>
    <view class="timePoint">
      <text>12</text>
    </view>
    <view class="timePoint">
      <text>13</text>
    </view>
    <view class="timePoint">
      <text>14</text>
    </view>
    <view class="timePoint">
      <text>15</text>
    </view>
    <view class="timePoint">
      <text>16</text>
    </view>
    <view class="timePoint">
      <text>17</text>
    </view>
    <view class="timePoint">
      <text>18</text>
    </view>
    <view class="timePoint">
      <text>19</text>
    </view>
    <view class="timePoint">
      <text>20</text>
    </view>
  </view>

  <view class="weekClass1"  wx:for="{{weekdays}}"  wx:for-item="item" wx:for-index="index">
    <view class="weekDate">
      <view class="weekDateitem" wx:if="{{index + 1 == currentDay && selectWeek==thisWeek}}">
        <view class="weekDateitemContent" style="background-color: rgba(152, 95, 254, 0.7);">
          <text>{{item}}</text>
        </view>
      </view>  
      <view class="weekDateitem" wx:else>
        <view class="weekDateitemContent">
          <text>{{item}}</text>
        </view>
      </view>       
    </view>
  </view>

  <view  wx:if="{{selectWeek >= 0}}" style="position: fixed; background-color: rgba(152, 95, 254, 0.2); height: 1180rpx; width: 130rpx; top: 195rpx; left: calc(50rpx - 140rpx + (140rpx * {{currentDay}}))"></view>

  <view class="weekClass">

    <view class="classes" wx:for="{{userCourseTime}}" wx:for-item="item" wx:for-index="index" >
      <view class="class" data-courseindex="{{index}}" bindtap="timeDetail"
        style="{{item.left}} {{item.top}} {{item.color}} {{item.height}} {{item.width}}" wx:if="{{item.display == 'yes'}}">

        <view class="noteFlag" wx:if="{{item.notes!=null}}"><image style="width: 22rpx; height: 28rpx" src="{{noteFlag}}" /></view>

        <text style="font-size: 22rpx; color: #FFFFFF;">{{item.courseName}}</text>
        <text style="font-size: 18rpx; color: #FFFFFF;">{{item.classTime.type}}</text>
        <text style="font-size: 18rpx; color: #FFFFFF;">{{item.classTime.location}}</text>
      </view>
    </view>
  </view>
</view>


<view class="addTimeItem" bindtap="">
  <navigator url="/pages/addTimeTable/addTimeTable">
    <image style="width: 88rpx; height: 88rpx" src="{{add}}" />
  </navigator>
</view>


<view class="shade  hide{{detailShow?'no':''}}" bindtap="timeDetailDown">



</view>
<view class="classDetail hide{{detailShow?'no':''}}" style="{{detailAnimation}}">
  <view class="detailHeader">
    <text class="classHead">课程详情</text>
    <text data-classindex="{{selectClass.courseindex}}" bindtap="deleteClass"
      style="padding-right:48rpx; color:red">删除</text>
  </view>

  <view class="detailInfor">
    <view class="inforname">
      <view class="infortitle">
        <text>名称</text>
      </view>

      <view class="inforContent">
        <text> {{selectClass.courseName}} {{selectClass.classTime.type}}</text>
      </view>
    </view>

    <view class="inforcolor">
      <view class="infortitle">
        <text>颜色</text>
      </view>

      <view class="colours">
        <view class="cdDetail ">
            <button class="colorButton" size="mini" bindtap="bindRed" hover-class="none">
              <image class="{{clicked_1? 'hide':''}}" src="{{beforeRed}}" style="width: 40rpx; height: 40rpx;" />
              <image class="{{clicked_1? '':'hide'}}" src="{{afterRed}}" style="width: 40rpx; height: 40rpx;" />
            </button>

            <button class="colorButton" size="mini" bindtap="bindYellow" hover-class="none">
              <image class="{{clicked_2? 'hide':''}}" src="{{beforeYellow}}" style="width: 40rpx; height: 40rpx;" />
              <image class="{{clicked_2? '':'hide'}}" src="{{afterYellow}}" style="width: 40rpx; height: 40rpx;" />
            </button>

            <button class="colorButton" size="mini" bindtap="bindGreen" hover-class="none">
              <image class="{{clicked_3? 'hide':''}}" src="{{beforeGreen}}" style="width: 40rpx; height: 40rpx;" />
              <image class="{{clicked_3? '':'hide'}}" src="{{afterGreen}}" style="width: 40rpx; height: 40rpx;" />
            </button>

            <button class="colorButton" size="mini" bindtap="bindBlue" hover-class="none">
              <image class="{{clicked_4? 'hide':''}}" src="{{beforeBlue}}" style="width: 40rpx; height: 40rpx;" />
              <image class="{{clicked_4? '':'hide'}}" src="{{afterBlue}}" style="width: 40rpx; height: 40rpx;" />
            </button>

            <button class="colorButton" size="mini" bindtap="bindGrey" hover-class="none">
              <image class="{{clicked_5? 'hide':''}}" src="{{beforeGrey}}" style="width: 40rpx; height: 40rpx;" />
              <image class="{{clicked_5? '':'hide'}}" src="{{afterGrey}}" style="width: 40rpx; height: 40rpx;" />
            </button>
        </view>
      </view>

    </view>
  </view>

  <view class="inforlocation">
    <view class="infortitle">
      <text>地点</text>
    </view>

    <view class="inforContent">
      <text>{{selectClass.classTime.location}}</text>
    </view>
  </view>

  <view class="infortime">
    <view class="infortitle">
      <text>时间</text>
    </view>

    <view class="inforContent">
      <text> {{selectClass.classTime.weekday}} {{selectClass.classTime["start-end"]}}</text>
    </view>
  </view>

  <view class="inforcomment">
    <view class="infortitle">
      <text>备注</text>
    </view>

    <view class="inforContent">
      <!-- <input bindinput="add_note" class="input" value="{{selectClass.notes}}" placeholder="点击输入备注"/> -->
      <textarea bindinput="add_note" class="input" value="{{selectClass.notes}}" placeholder="点击输入备注"></textarea>
    </view>
  </view>
  <view style="width: 100%; display: flex; justify-contents: center; align-items: center;">
  <button class="mini-btn" type="primary" size="mini" bindtap="update_note" 
      style="width: 50%; margin-top: 40rpx; margin-bottom: 10rpx;">添加</button>
  </view>
</view>
